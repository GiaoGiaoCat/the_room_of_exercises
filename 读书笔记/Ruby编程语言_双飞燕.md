# 一 导言

1. Ruby 是一门纯粹的面向对象语言，但它同样适用于过程式和函数式编程风格。拥有强大的元编程能力，可用于创建特定领域语言(DSL)。
2. 迭代器的特殊方法其行为类似于循环。
3. 数组定义了 each 的迭代器，它为数组里的每一个元素调用一次相关联的代码块，每次对代码块的调用都以数组里的一个元素作为参数。
4. 符号是不可变的、功能受限的字符串，可以通过其身份来对符号进行比较，而非通过其文本内容。
5. Ruby 的语法是面向表达式的，诸如 if 之类的控制结构也是表达式，表达式具有返回值，但未必返回有意义的值，比如 whild 返回 nil。
6. "%d %s" % [3, "rubies"] 输出 "3 rubies" Ruby 接受 Python-style, printf formatting
7. Ruby 操作符都是作为方法实现的，因此可以被重新定义。但我们不能定义新的操作符，因为可识别的操作符是一个固定集合。
8. = 操作符不可以被重定义。
9. Ruby 的关键特性之一就是类和模块都是开放的，可以在运行时修改和扩展。
10. Ruby 支持并行赋值，且允许方法返回多个值。
11. 问号方法被用于标示谓词，即返回 Boolean 值。叹号方法会修改原对象。
12. Regexp 和 Range 也是 Ruby 的对象
13. 类是一些相关方法的集合，方法操作一个对象的状态。对象的状态被保存在它的实例变量中。
14. nil 和 false 在条件和循环中被当做 false 处理。其它都当做 true 处理。（Javascript 中的 "" 被认为是 false)
15. puts 接收的对象如果不是一个字符串，就会自动调用该对象的 to_s 方法。
16. p 方法比 puts 更好，因为会调用对象的 inspect 方法将对象转换成字符串。
17. rubygems 模块自 Ruby 1.9 就成了标准库中的一部分，故不再需要在使用 gems 的项目中先 require 'rubygems'。
18. 以对象名为方法名的前缀，这样的方法叫做单件方法。

# 二 Ruby 程序的结构和运行

1. Ruby 支持嵌入式文档。在方法、类及模块定义之前，可以包含嵌入式的API文档。该文档是遵循特殊格式的注释。
2. 字面量就是直接出现在源代码里的值，包括数字、字符串及正则表达式。
3. 数组、哈希是一些更复杂的表达式而非单个标记。
4. Ruby 是一种大小写敏感的语言。
5. Unicode 为代表的一些字符集里，对同一个字符可能存在多个码点。
6. Ruby 语言的许多重要特性实际上使用 Kernel, Module, Class, Object 几个类和模块的方法来实现的。
7. 空白符包括空格，制表，换行符，它本身不是标记，只用于分割不同的标记。
8. 空白符依赖性：程序依据插入换行符未知的不同而表现出不同个行为。
9. 下列情形，可以放心的插入一个换行符而不必担心语句被提前结束：
  * 操作符之后插入换行符 ``` puts x + y ```
  * 方法调用的句点之后插入换行符 ``` Foo.new.say_hello ```
  * 数组或者哈希表字面量里，用户分割各元素的逗号之后 ``` [1,2,3] { x: 1, y: 2 } ```
10. 可以用 "\" 来对换行符进行转义，避免 Ruby 自动终结该语句
11. 如果一行代码的第一个非空白字符是一个句点，那么这一行被当做上一行的延续，且前一行的换行符将不被当做语句终结。
12. 空格符依赖性的解决：
  * 永远不要在方法名和其后的左圆括号之间留白
  * 如果一个方法的第一个参数以圆括号开头，那么此方法调用中，请一直使用圆括号
13. Ruby 中最基本的句法单元是表达式
14. Ruby 有块状结构，块由关键字和标点符号分隔，且使用两个空格符进行缩进。
   * block 是一段与迭代器方法关联的代码，由花括号或者 do, end 关键字分隔
   * body 是一个语句列表，包括类定义，方法定义，while循环体等结构。采用关键字分隔。
15. 如果 Ruby 程序含有 shebang 注释，该注释必须是第一行。该注释只是操作系统如何执行该文件。
16. 如果文件编码是 utf-8 那么注释，字符串和正则表达式就可以包含任意的 Unicode 字符
17. 程序的作者在文件开头放入一个特殊的 编码注释 来指定编码。-- 详情参考 P37
18. 源编码会告诉 Ruby 解释器如何解读脚本中的字符，通常采用编码注释来设定一个文件的源编码。
19. 默认外部编码是当 Ruby 从文件或流中读取内容是采用的默认编码。对于 I/O 来说很重要。
20. Encoding.default_external 查询默认外部编码
21. Encoding.local_charmap 获得从区域设置得到的字符编码的名称
22. Ruby 接受一个脚本，扫描文件中的 BEGIN 语句，然后执行该语句体所包含的代码。执行完 BEGIN 之后，再回到第一行代码，顺序执行到最后一行。

```
# coding: utf-8
=begin Someone needs to fix the broken code below!
  Any code here is commented out
=end

# 空白符依赖性
total = x +
  y
total = x
  + y
```
